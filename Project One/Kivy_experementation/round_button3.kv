<CustomButton>:
    size_hint: 1, 1
    on_size: self.update_size()

    canvas:
        Color:
            rgba: ((1,1,1,1) if self.state == "normal" else (.5,.5,.5,1))
        Ellipse:
            pos: self.button_pos_x, self.button_pos_y
            size: self.button_width, self.button_height